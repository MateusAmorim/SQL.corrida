# SQL.corrida
projeto_faculdade

--CRIAÇÃO DE BASE DE DADOS

CREATE DATABASE CORRIDA_0;

--CRIAÇÃO DE TABELAS

create table TB_EQUIPE
(
ID_EQUIPE INT PRIMARY KEY NOT NULL,
NM_EQUIPE VARCHAR(30) NOT NULL,
ID_PAIS INT NOT NULL
);

CREATE TABLE TB_PILOTO
(
ID_PILOTO INT PRIMARY KEY NOT NULL,
NM_PILOTO VARCHAR(30) NOT NULL,
DT_NASCIMENTO DATE NOT NULL,
ID_PAIS INT NOT NULL,
ID_EQUIPE INT NOT NULL
);

CREATE TABLE TB_PAIS
(
ID_PAIS INT PRIMARY KEY NOT NULL,
NM_PAIS VARCHAR(30) NOT NULL,
NR_POPULACAO INT NOT NULL
);

CREATE TABLE TB_CIRCUITO
(
ID_CIRCUITO INT PRIMARY KEY NOT NULL,
NM_CIRCUITO VARCHAR(30) NOT NULL,
NR_EXTENSAO NUMERIC(15,2) NOT NULL,
ID_PAIS INT NOT NULL 
);

CREATE TABLE TB_PROVA
(
ID_PROVA INT PRIMARY KEY NOT NULL,
DT_PROVA DATETIME NOT NULL,
NM_SITUACAO VARCHAR(30),
ID_CIRCUITO INT NOT NULL 
);

CREATE TABLE TB_RESULTADO
(
ID_PROVA INT NOT NULL,
ID_PILOTO INT NOT NULL,
NR_TEMPO_PROVA NUMERIC(15,2) NOT NULL,
NR_COLOC_FINAL INT NOT NULL,
NR_POSICAO_GRID INT NOT NULL,
NR_MELHOR_VOLTA NUMERIC(15,2) NOT NULL
);


--CRIAÇÃO DE CHAVES ESTRANGEIRAS

ALTER TABLE TB_RESULTADO 
 ADD CONSTRAINT FK_PROVA_RESULT FOREIGN KEY(ID_PROVA) REFERENCES TB_PROVA(ID_PROVA); 

ALTER TABLE TB_RESULTADO 
 ADD CONSTRAINT FK_PILOTO_RESULT FOREIGN KEY(ID_PILOTO) REFERENCES TB_PILOTO(ID_PILOTO);
 
ALTER TABLE TB_PROVA 
 ADD CONSTRAINT FK_CIRCUITO_PROVA FOREIGN KEY(ID_CIRCUITO) REFERENCES TB_CIRCUITO(ID_CIRCUITO);
 
ALTER TABLE TB_CIRCUITO 
 ADD CONSTRAINT FK_PAIS_CIRCUITO FOREIGN KEY(ID_PAIS) REFERENCES TB_PAIS(ID_PAIS);
 
ALTER TABLE TB_PILOTO 
 ADD CONSTRAINT FK_PAIS_PILOTO FOREIGN KEY(ID_PAIS) REFERENCES TB_PAIS(ID_PAIS);
 
ALTER TABLE TB_PILOTO 
 ADD CONSTRAINT FK_EQUIPE_PILOTO FOREIGN KEY(ID_EQUIPE) REFERENCES TB_EQUIPE(ID_EQUIPE);
 
ALTER TABLE TB_EQUIPE 
 ADD CONSTRAINT FK_PAIS_EQUIPE FOREIGN KEY(ID_PAIS) REFERENCES TB_PAIS(ID_PAIS); 
 
 
 --INCERINDO DADOS NA TB_CIRCUITO
 
INSERT INTO dbo.TB_PAIS
(ID_PAIS,NM_PAIS,NR_POPULACAO)
VALUES
(1,'BRASIL',100000),
(2,'ITÁLIA',100001),
(3,'EUA',100002),
(4,'PORTUGAL',100003),
(5,'FRANÇA',100004),
(6,'ALEMANHA',100005),
(7,'UCRANIA',100006),
(8,'ALEMANHA',100007),
(9,'AUSTRÁLIA',100008),
(10,'CANADÁ',100009);

INSERT INTO dbo.TB_EQUIPE
(ID_EQUIPE,NM_EQUIPE,ID_PAIS)
VALUES
(01,'Alfa Romeo',1),
(02,'Ferrari',2),
(03,'Aston Martin',3),
(04,'Haas F1 Team',4),
(05,'McLaren',5),
(06,'Mercedes',6),
(07,'Red Bull Racing',7),
(08,'Alpine',8),
(09,'Alpha Tauri',9),
(010,'Williams',10);

INSERT INTO dbo.TB_PILOTO
(ID_PILOTO,NM_PILOTO,DT_NASCIMENTO,ID_PAIS,ID_EQUIPE)
VALUES
(001,'Carlo Abate','10/01/1990',01,1),
(002,'George Abecassis','11/02/1990',02,2),
(003,'Kenny Acheson','12/03/1991',03,3),
(004,'Andrea de Adamich','13/04/1992',04,4),
(005,'Philippe Adams','14/05/1993',05,5),
(006,'Walt Ader','15/06/1994',06,6),
(007,'Kurt Adolff','16/07/1995',07,7),
(008,'Fred Agabashian','17/08/1996',08,8),
(009,'Kurt Ahrens Jr.','18/09/1997',09,9),
(0010,'Jack Aitken','19/10/1998',010,10);

INSERT INTO dbo.TB_CIRCUITO
(ID_CIRCUITO,NM_CIRCUITO,NR_EXTENSAO,ID_PAIS)
VALUES
(0001,'Circuito de Rua de Adelaide',378000,1),
(0002,'Circuito de Ain-Diab',761800,2),
(0003,'Circuito de Aintree',482800,3),
(0004,'Circuito de Albert Parkdagger',530300,4),
(0005,'Autódromo do Algarve',469200,5),
(0006,'Circuito das Américasdagger',551300,6),
(0007,'Autódromo de Anderstorp',403100,7),
(0008,'AVUS',830000,8),
(0009,'Circuito do Bahreindagger',541200,9),
(00010,'Circuito Urbano de Bakudagger',629900,10);

INSERT INTO dbo.TB_PROVA
(ID_PROVA,DT_PROVA,NM_SITUACAO,ID_CIRCUITO)
VALUES
(00011,'10/01/2010','1ªETAPA',0001),
(00012,'12/02/2010','2ªETAPA',0002),
(00013,'15/03/2010','3ªETAPA',0003),
(00014,'17/04/2010','4ªETAPA',0004),
(00015,'19/05/2010','5ªETAPA',0005),
(00016,'21/06/2010','6ªETAPA',0006),
(00017,'23/07/2010','7ªETAPA',0007),
(00018,'25/08/2010','8ªETAPA',0008),
(00019,'27/09/2010','9ªETAPA',0009),
(000110,'29/10/2010','10ªETAPA',00010);

INSERT INTO dbo.TB_RESULTADO
(ID_PROVA,ID_PILOTO,NR_TEMPO_PROVA,NR_COLOC_FINAL,NR_POSICAO_GRID,NR_MELHOR_VOLTA)
VALUES
(00011,001,1000,1,9,010),
(00012,002,2000,2,4,020),
(00013,003,3000,3,6,030),
(00014,004,4000,4,3,040),
(00015,005,5000,5,1,050),
(00016,006,6000,6,2,060),
(00017,007,7000,7,8,070),
(00018,008,8000,8,10,080),
(00019,009,9000,9,5,090),
(000110,0010,10000,10,7,100);
